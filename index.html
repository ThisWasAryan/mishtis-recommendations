<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mishti's Recommendations</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            height: 100vh;
            overflow: hidden;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: #1e1e1e;
            padding: 24px 32px;
            z-index: 1000;
            border-bottom: 1px solid #2a2a2a;
        }
        .header h1 {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            letter-spacing: -0.5px;
        }
        #map {
            position: absolute;
            top: 73px;
            left: 0;
            right: 0;
            bottom: 0;
        }
        .controls {
            position: absolute;
            top: 93px;
            right: 20px;
            z-index: 999;
        }
        .btn {
            padding: 12px 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s ease;
            background: #252525;
            color: #e0e0e0;
            border: 1px solid #3a3a3a;
        }
        .btn:hover {
            background: #2e2e2e;
            border-color: #4a4a4a;
        }
        .sidebar {
            position: absolute;
            top: 73px;
            left: -450px;
            width: 450px;
            bottom: 0;
            background: #1e1e1e;
            z-index: 998;
            overflow-y: auto;
            transition: left 0.3s ease;
            border-right: 1px solid #2a2a2a;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .sidebar::-webkit-scrollbar {
            display: none;
        }
        .sidebar.open {
            left: 0;
        }
        .sidebar-content {
            padding: 32px;
        }
        .sidebar-header {
            position: sticky;
            top: 0;
            background: #1e1e1e;
            padding: 20px 20px 16px 20px;
            z-index: 10;
            border-bottom: 1px solid #2a2a2a;
        }
        .close-btn {
            background: #252525;
            border: 1px solid #3a3a3a;
            color: #e0e0e0;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            float: right;
        }
        .close-btn:hover {
            background: #2e2e2e;
            border-color: #4a4a4a;
        }
        .place-title {
            font-size: 26px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #ffffff;
            letter-spacing: -0.5px;
            clear: both;
        }
        .user-review {
            background: #252525;
            padding: 20px;
            border-radius: 8px;
            border-left: 3px solid #3b82f6;
            margin-bottom: 28px;
            font-style: italic;
            line-height: 1.7;
            color: #b0b0b0;
        }
        .pros-cons-container {
            margin-top: 28px;
        }
        .section {
            margin-bottom: 24px;
        }
        .section h3 {
            font-size: 16px;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 13px;
        }
        .pros h3 {
            color: #10b981;
        }
        .cons h3 {
            color: #ef4444;
        }
        .section ul {
            list-style: none;
            padding: 0;
        }
        .section li {
            padding: 11px 0;
            padding-left: 26px;
            position: relative;
            line-height: 1.6;
            color: #b0b0b0;
            border-bottom: 1px solid #252525;
        }
        .section li:last-child {
            border-bottom: none;
        }
        .pros li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
            font-size: 16px;
        }
        .cons li:before {
            content: "‚úó";
            position: absolute;
            left: 0;
            color: #ef4444;
            font-weight: bold;
            font-size: 16px;
        }
        .gmaps-link {
            display: inline-block;
            margin-top: 24px;
            padding: 12px 24px;
            background: #3b82f6;
            color: #ffffff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        .gmaps-link:hover {
            background: #2563eb;
        }
        .distance-display {
            position: absolute;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e1e1e;
            padding: 20px 40px;
            border-radius: 8px;
            z-index: 999;
            border: 1px solid #3a3a3a;
            text-align: center;
        }
        .distance-display h3 {
            font-size: 12px;
            margin-bottom: 8px;
            color: #808080;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }
        .distance-value {
            font-size: 28px;
            color: #3b82f6;
            font-weight: 600;
        }
        .leaflet-popup-content-wrapper {
            background: #1e1e1e;
            color: #e0e0e0;
            border-radius: 8px;
            padding: 4px;
            border: 1px solid #3a3a3a;
        }
        .leaflet-popup-content {
            margin: 14px;
            font-size: 14px;
        }
        .leaflet-popup-tip {
            background: #1e1e1e;
            border: 1px solid #3a3a3a;
        }
        .popup-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 10px;
            color: #ffffff;
        }
        .popup-btn {
            display: inline-block;
            margin-top: 8px;
            padding: 8px 16px;
            background: #3b82f6;
            color: #ffffff;
            text-decoration: none;
            border-radius: 5px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }
        .popup-btn:hover {
            background: #2563eb;
        }
        @media (max-width: 768px) {
            .header h1 {
                font-size: 20px;
            }
            .sidebar {
                width: 100%;
                left: -100%;
            }
            .controls {
                top: 90px;
                right: 10px;
            }
            .btn {
                padding: 10px 12px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Mishti's Recommendations</h1>
    </div>

    <div id="map"></div>

    <div class="controls">
        <button class="btn" onclick="clearPins()" title="Clear Pins">üóëÔ∏è</button>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <button class="close-btn" onclick="closeSidebar()">√ó</button>
        </div>
        <div class="sidebar-content" id="sidebar-content"></div>
    </div>

    <div id="distance-container"></div>

    <script>
        // ========================================
        // PLACE DATA - EASY TO EDIT
        // ========================================
        // VERIFIED COORDINATES (searched and confirmed online)
        // To add a new place: Copy a place object below, modify values, add comma after previous entry
        // To find coordinates: Right-click on Google Maps ‚Üí Click the coordinates that appear
        
        const places = [
            {
                name: "Central Park Salt Lake",
                lat: 22.583938,      // VERIFIED: Central Park, Sector III, Salt Lake
                lng: 88.416204,
                userReview: "Ok so if he wants good environment in salt lake Its central park it has good views with peace",
                pros: [
                    "Beautiful green spaces and walking paths",
                    "Peaceful environment with good views",
                    "Well-maintained park facilities",
                    "Great for morning walks and evening strolls"
                ],
                cons: [
                    "Can get crowded on weekends",
                    "Limited parking space",
                    "Entry fee required"
                ]
            },
            {
                name: "Eco Park New Town",
                lat: 22.600488,      // VERIFIED: Eco Park, Major Arterial Road, New Town
                lng: 88.470768,
                userReview: "And in newtown it would be eco park it has the 7 wonders peaceful sitting areas and photogenic places like a flower garden",
                pros: [
                    "Features replicas of 7 wonders of the world",
                    "Beautiful flower gardens and photogenic spots",
                    "Peaceful sitting areas throughout",
                    "Large area with diverse attractions",
                    "Boating facilities available"
                ],
                cons: [
                    "Very crowded on holidays",
                    "Food options are limited inside"
                ]
            },
            {
                name: "Axis Mall (with Chinese Caf√©)",
                lat: 22.5796041,     // VERIFIED: Axis Mall, Action Area 1C, New Town
                lng: 88.4599513,
                userReview: "Thora posh mein jaana hai he can explore axis and city centre malls it has many good outlets to eat. There is this very good small cafe in axis mall it is chinese and the food is very good",
                pros: [
                    "Excellent Chinese caf√© with great food",
                    "Wide variety of dining and shopping options",
                    "Modern mall with good ambiance",
                    "Ample parking space",
                    "Air-conditioned comfort"
                ],
                cons: [
                    "Can be expensive",
                    "Crowded during weekends",
                    "Small Chinese caf√© can have waiting time"
                ]
            },
            {
                name: "City Centre 2",
                lat: 22.622954,        // APPROXIMATE: City Centre Mall, New Town
                lng: 88.449917,
                userReview: "Thora posh mein jaana hai he can explore axis and city centre malls it has many good outlets to eat",
                pros: [
                    "Premium shopping destination",
                    "Excellent food court and restaurants",
                    "Multiplex cinema",
                    "Well-maintained facilities",
                    "Good brands and outlets"
                ],
                cons: [
                    "Premium pricing",
                    "Heavy traffic during peak hours",
                    "Parking can be challenging on weekends"
                ]
            },
            {
                name: "Kosha Koshe Chinar Park",
                lat: 22.625047,        // APPROXIMATE: Chinar Park area
                lng: 88.438756,
                userReview: "Bengali cuisine khaana hai he can go to kosha koshe in chinaar park",
                pros: [
                    "Authentic Bengali cuisine",
                    "Good quality traditional food",
                    "Reasonable pricing",
                    "Popular local restaurant"
                ],
                cons: [
                    "Can be crowded during lunch/dinner",
                    "Limited seating capacity",
                    "Waiting time during peak hours"
                ]
            },
            {
                name: "Nalban Boating Complex",
                lat: 22.568554,        // APPROXIMATE: Nalban area, Salt Lake
                lng: 88.430920,
                userReview: "There is one nalban boating complex like a restaurant with a lake view its very peaceful",
                pros: [
                    "Beautiful lake views",
                    "Very peaceful environment",
                    "Boating facilities available",
                    "Restaurant with scenic setting",
                    "Good for relaxation"
                ],
                cons: [
                    "Limited food menu",
                    "Boating charges apply",
                    "Can be hot during summer afternoons"
                ]
            },
            {
                name: "The Green House Caf√© (Behind Hidco Bhawan)",
                lat: 22.580097,        // APPROXIMATE: Near Hidco Bhawan area
                lng: 88.473352,
                userReview: "If cafes with privacy he can ho to the green house it is behind hidco bhawan it is ver peaceful and quite",
                pros: [
                    "Very peaceful and quiet atmosphere",
                    "Good privacy for conversations",
                    "Nice ambiance with greenery",
                    "Quality caf√© offerings"
                ],
                cons: [
                    "Slightly hidden location",
                    "Limited seating capacity",
                    "Can be pricey for a caf√©"
                ]
            },
            {
                name: "Prinsep Ghat Park",
                lat: 22.558902,        // APPROXIMATE: Old Kolkata area
                lng: 88.332888,
                userReview: "I would have suggested princep ghat and victoria but that is in old Kolkata",
                pros: [
                    "Riverside location",
                    "Great for photography",
                    "Great for couples"
                ],
                cons: [
                    "Located in Old Kolkata",
                    "Heavy traffic getting there",
                    "Hostility"
                ]
            },
            {
                name: "Mishti's College (St. Xavier's University)",
                lat: 22.56074,       // VERIFIED: St. Xavier's University, Action Area III
                lng: 88.48801,
                userReview: "This is where Mishti studies! St. Xavier's University in Action Area III, New Town.",
                pros: [
                    "PROS JAAN KAR KYA KROGE"
                ],
                cons: [
                    "CONS?",
                ]
            }
        ];

        // ========================================
        // HOW TO CHANGE COLORS
        // ========================================
        // Search for these hex codes and replace:
        // #3b82f6 = Blue accent color (buttons, links, distance)
        // #1e1e1e = Dark background
        // #252525 = Slightly lighter dark
        // #10b981 = Green (for pros)
        // #ef4444 = Red (for cons)

        // ========================================
        // MAP INITIALIZATION
        // ========================================
        const map = L.map('map').setView([22.5726, 88.4639], 13);
        
        // NORMAL OPENSTREETMAP TILES (visible, not dark)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);

        // Custom pins tracking
        let customPins = [];
        let customMarkers = [];
        let distanceLine = null;
        let placeMarkers = [];

        // Blue marker icon for places
        const blueIcon = L.divIcon({
            className: 'custom-div-icon',
            html: `<div style="
                background-color: #3b82f6;
                width: 28px;
                height: 28px;
                border-radius: 50% 50% 50% 0;
                transform: rotate(-45deg);
                border: 2px solid #1e1e1e;
                box-shadow: 0 2px 8px rgba(59, 130, 246, 0.5);
            "></div>`,
            iconSize: [28, 28],
            iconAnchor: [14, 28],
            popupAnchor: [0, -28]
        });

        // Red marker icon for custom pins
        const redIcon = L.divIcon({
            className: 'custom-div-icon',
            html: `<div style="
                background-color: #ef4444;
                width: 24px;
                height: 24px;
                border-radius: 50% 50% 50% 0;
                transform: rotate(-45deg);
                border: 2px solid #1e1e1e;
                box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
            "></div>`,
            iconSize: [24, 24],
            iconAnchor: [12, 24],
            popupAnchor: [0, -24]
        });

        // ========================================
        // ADD PLACE MARKERS
        // ========================================
        places.forEach((place, index) => {
            const marker = L.marker([place.lat, place.lng], { icon: blueIcon })
                .addTo(map)
                .bindPopup(`
                    <div class="popup-title">${place.name}</div>
                    <button class="popup-btn" onclick="showPlaceDetails(${index})">View Details</button>
                `);
            
            marker.placeIndex = index;
            marker.on('click', function() {
                showPlaceDetails(index);
            });
            
            placeMarkers.push(marker);
        });

        // ========================================
        // SHOW PLACE DETAILS IN SIDEBAR
        // ========================================
        function showPlaceDetails(index) {
            const place = places[index];
            const gmapsLink = `https://www.google.com/maps/search/?api=1&query=${place.lat},${place.lng}`;
            
            document.getElementById('sidebar-content').innerHTML = `
                <h2 class="place-title">${place.name}</h2>
                <div class="user-review">${place.userReview}</div>
                
                <div class="pros-cons-container">
                    <div class="section pros">
                        <h3>Pros</h3>
                        <ul>
                            ${place.pros.map(pro => `<li>${pro}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="section cons">
                        <h3>Cons</h3>
                        <ul>
                            ${place.cons.map(con => `<li>${con}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <a href="${gmapsLink}" target="_blank" class="gmaps-link">
                    Open in Google Maps
                </a>
            `;
            
            openSidebar();
            map.setView([place.lat, place.lng], 15);
        }

        function openSidebar() {
            document.getElementById('sidebar').classList.add('open');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('open');
        }

        // ========================================
        // DISTANCE CALCULATION (HAVERSINE)
        // ========================================
        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                     Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                     Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function updateDistanceDisplay() {
            const container = document.getElementById('distance-container');
            if (customPins.length >= 2) {
                const last = customPins[customPins.length - 1];
                const secondLast = customPins[customPins.length - 2];
                const distance = calculateDistance(
                    secondLast.lat, secondLast.lng,
                    last.lat, last.lng
                );
                container.innerHTML = `
                    <div class="distance-display">
                        <h3>Distance</h3>
                        <div class="distance-value">${distance.toFixed(2)} km</div>
                    </div>
                `;
            } else {
                container.innerHTML = '';
            }
        }

        // ========================================
        // CUSTOM PIN DROPPING
        // ========================================
        map.on('click', function(e) {
            const pin = {
                lat: e.latlng.lat,
                lng: e.latlng.lng
            };
            customPins.push(pin);

            const marker = L.marker([pin.lat, pin.lng], { icon: redIcon })
                .addTo(map)
                .bindPopup(`<div style="text-align:center"><b>Custom Pin ${customPins.length}</b></div>`);
            
            customMarkers.push(marker);

            if (customPins.length >= 2) {
                if (distanceLine) {
                    map.removeLayer(distanceLine);
                }
                const last = customPins[customPins.length - 1];
                const secondLast = customPins[customPins.length - 2];
                distanceLine = L.polyline([
                    [secondLast.lat, secondLast.lng],
                    [last.lat, last.lng]
                ], {
                    color: '#ef4444',
                    weight: 2,
                    opacity: 0.8,
                    dashArray: '8, 8'
                }).addTo(map);
            }

            updateDistanceDisplay();
        });

        function clearPins() {
            customPins = [];
            customMarkers.forEach(marker => map.removeLayer(marker));
            customMarkers = [];
            if (distanceLine) {
                map.removeLayer(distanceLine);
                distanceLine = null;
            }
            updateDistanceDisplay();
        }
    </script>
</body>
</html>
